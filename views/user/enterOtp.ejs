<%-include('../layouts/headerforlogin.ejs') %>

<form action="/check-otp" method="post">
  <div class="container3">
    <div class="form-group row">
      <div class="d-flex flex-column align-items-center">
        <label>otp</label>
        <input type="text" name="otp"><br>

        <%=(typeof message !== 'undefined') ? message : "" %>

        <button type="submit">VERIFY</button>
        <p id="timer"><span id="countdown"></span></p>
      </div>
    </div>
  </div>
</form>

<style>
  .container3 {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 59vh;
  }
</style>

<script>
  document.addEventListener("DOMContentLoaded", function() {
    const countdownElement = document.getElementById('countdown');
    let timer = <%= otpTimeLimit/1000 %>;

    function updateTimer() {
      if (timer > 0) {
        countdownElement.textContent = 'OTP expires in: ' + timer + ' seconds';
      } else {
        clearInterval(timerInterval);
        countdownElement.textContent = ''; // Clear the previous timer text

        // Display the "Resend OTP" button
        const resendButton = document.createElement('button');
        resendButton.textContent = 'Resend OTP';
        resendButton.addEventListener('click', function() {
          // Implement the logic to resend the OTP here
          console.log('Resending OTP...');
        });
        countdownElement.parentElement.appendChild(resendButton);

        // You can perform additional actions here when the time expires
      }

      timer--;
    }

    const timerInterval = setInterval(updateTimer, 1000);
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
</body>
</html>
